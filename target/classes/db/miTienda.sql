#create database miTienda;
CREATE DATABASE IF NOT EXISTS mitienda;
USE mitienda;
START TRANSACTION;
CREATE TABLE IF NOT EXISTS producto (
	id	INTEGER PRIMARY KEY AUTO_INCREMENT,
	created	TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	nombre	TEXT,
	precio	INTEGER DEFAULT 0,
	stock	INTEGER DEFAULT 0,
	id_categoria	INTEGER
);
CREATE TABLE IF NOT EXISTS facturas_linea (
	id	INTEGER PRIMARY KEY AUTO_INCREMENT,
	created	TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	id_factura	INTEGER,
	nombre	TEXT,
	precio	INTEGER
);
CREATE TABLE IF NOT EXISTS facturas (
	id	INTEGER,
	created	TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	fecha	TIMESTAMP,
	id_cliente	INTEGER,
	serie	INTEGER,
	PRIMARY KEY(id,id_cliente)
);
CREATE TABLE IF NOT EXISTS mn_categoria_producto (
	id_categoria	INTEGER,
	id_producto	INTEGER
);
CREATE TABLE IF NOT EXISTS categorias (
	id	INTEGER PRIMARY KEY AUTO_INCREMENT,
	created	TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	nombre	VARCHAR(40) UNIQUE
);
CREATE TABLE IF NOT EXISTS clientes (
	id	INTEGER PRIMARY KEY AUTO_INCREMENT UNIQUE,
	created	TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	nombre	VARCHAR(40) NOT NULL,
	dni	VARCHAR(40) NOT NULL UNIQUE,
	direccion	TEXT,
	telefono	TEXT,
	email	TEXT
);
COMMIT;categorias